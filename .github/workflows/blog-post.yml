name: Set recent blog post in README

on:
    schedule:
        - cron: "0 * * * *"
    push:
        paths:
            - "scripts/blog-post.sh"
    workflow_dispatch:

jobs:
    update-readme-blog-post:
        name: Update README with latest blog posts
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - name: Run script
              run: |
                  chmod +x ./scripts/blog-post.sh
                  ./scripts/blog-post.sh
            - name: Commit
              run: |
                  chmod +x ./scripts/commit.sh
                  ./scripts/commit.sh
              env:
                  TOKEN: ${{ secrets.TOKEN }}
                  REPOSITORY: ${{ github.repository }}
                  MESSAGE: "Update blog post"
